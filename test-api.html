<!DOCTYPE html>
<html>
<head>
    <title>Test Reference Data API</title>
</head>
<body>
    <h1>Test Reference Data API</h1>
    <div id="results"></div>

    <script>
        // Test function to check API endpoints
        async function testAPI() {
            const baseURL = 'https://aps2.zemenbank.com';
            const token = localStorage.getItem('auth_token');
            
            if (!token) {
                document.getElementById('results').innerHTML = '<p style="color: red;">No auth token found. Please login first.</p>';
                return;
            }

            const endpoints = [
                '/api/reference-data/categories',
                '/api/reference-data/risk-levels', 
                '/api/reference-data/risk-ratings',
                '/api/reference-data/vulnerabilities',
                '/api/reference-data/compliance-gaps',
                '/api/reference-data/standards'
            ];

            let results = '<h2>API Test Results:</h2>';

            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(baseURL + endpoint, {
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        results += `<p style="color: green;">✅ ${endpoint}: ${data.data?.length || 0} items</p>`;
                        console.log(`${endpoint}:`, data);
                    } else {
                        results += `<p style="color: red;">❌ ${endpoint}: ${response.status} ${response.statusText}</p>`;
                    }
                } catch (error) {
                    results += `<p style="color: red;">❌ ${endpoint}: ${error.message}</p>`;
                }
            }

            document.getElementById('results').innerHTML = results;
        }

        // Auto-run test when page loads
        testAPI();
    </script>
</body>
</html>
